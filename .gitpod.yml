image:
  file: .gitpod.Dockerfile
tasks:
- before: >
    source ~/.bashrc
  init: |
    flutter upgrade
    flutter update-packages --force-upgrade
    npm -g install firebase-tools
    firebase --version
    firebase login --no-localhost
    gp sync-done flutter_install
- name: codelabs part
  init: |
    gp sync-await flutter_install
    firebase init
    flutter run -d web-server --no-resident # prebuilds the app
    firebase use --add
    # flutter run -d web-server --web-renderer html
    # firebase deploy --only firestore:indexes
    # firebase deploy --only firestore:rules
    # flutter build web
    # firebase init hosting
    # firebase deploy --only hosting
  command: >
    flutter run -d web-server --web-renderer html --web-port=8080 --web-hostname=0.0.0.0
  openMode: split-right
ports:
- port: 8080
  onOpen: open-preview
vscode:
  extensions:
    - Dart-Code.dart-code
    - Dart-Code.flutter
